<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—à–∏–Ω–∞ –ë–æ–ª—å—Ü–º–∞–Ω–∞ - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ —Ç–µ—Ä–º–∏–Ω–æ–≤ */
        .term-highlight {
            position: relative;
        }
        
        .term-highlight::after {
            content: attr(data-tooltip);
            position: absolute;
            left: 50%;
            top: calc(100% + 8px);
            transform: translateX(-50%);
            background: rgba(20, 20, 30, 0.98);
            color: #e0e0e0;
            padding: 12px 15px;
            border-radius: 8px;
            font-size: 13px;
            line-height: 1.5;
            width: 300px;
            max-width: calc(100vw - 20px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(102, 126, 234, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 10000;
            pointer-events: none;
            white-space: normal;
        }
        
        /* –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –∫—Ä–∞–π–Ω–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ */
        .term-highlight:first-of-type::after {
            left: 0;
            transform: none;
        }
        
        .term-highlight:last-of-type::after {
            left: auto;
            right: 0;
            transform: none;
        }

        .term-highlight:hover::after {
            opacity: 1;
            visibility: visible;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .term-highlight {
            position: relative;
            border-bottom: 2px dotted #667eea;
            cursor: help;
            transition: all 0.3s ease;
            padding-bottom: 1px;
            display: inline-block;
        }

        .term-highlight:hover {
            border-bottom-color: #818cf8;
            color: #818cf8;
        }

        .term-tooltip {
            position: absolute;
            top: 28px;
            left: 0;
            transform: translateX(-20%);
            background: rgba(20, 20, 30, 0.98);
            color: #e0e0e0;
            padding: 15px;
            border-radius: 10px;
            font-size: 13px;
            line-height: 1.6;
            width: 280px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(102, 126, 234, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 1000;
            pointer-events: none;
        }

        /* –û—Å–æ–±–∞—è –ø–æ–∑–∏—Ü–∏—è –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞ —á—Ç–æ–±—ã –Ω–µ –≤—ã—Ö–æ–¥–∏–ª –∑–∞ –∫—Ä–∞–π */
        .term-highlight:nth-of-type(2) .term-tooltip {
            left: auto;
            right: -50px;
            transform: none;
        }

        .term-highlight:hover .term-tooltip {
            opacity: 1;
            visibility: visible;
        }

        .term-tooltip::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 30px;
            border: 8px solid transparent;
            border-bottom-color: rgba(102, 126, 234, 0.4);
        }

        .term-tooltip::after {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 30px;
            border: 7px solid transparent;
            border-bottom-color: rgba(20, 20, 30, 0.98);
            margin-bottom: -1px;
        }

        /* –î–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞ —Å—Ç—Ä–µ–ª–∫–∞ –ø—Ä–∞–≤–µ–µ */
        .term-highlight:nth-of-type(2) .term-tooltip::before,
        .term-highlight:nth-of-type(2) .term-tooltip::after {
            left: auto;
            right: 80px;
        }

        .term-tooltip strong {
            color: #667eea;
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .theory-intro p {
            margin: 0 0 20px 0;
            line-height: 1.8;
        }

        .theory-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .theory-intro {
            font-size: 15px;
            line-height: 1.8;
            color: #e0e0e0;
        }

        .theory-intro p {
            margin: 0 0 20px 0;
            line-height: 1.8;
            text-align: justify;
        }

        .term-highlight {
            position: relative;
            border-bottom: 2px dotted #667eea;
            cursor: help;
            transition: all 0.3s ease;
            padding-bottom: 1px;
        }

        .term-highlight:hover {
            border-bottom-color: #818cf8;
            color: #818cf8;
        }

        .term-tooltip {
            position: absolute;
            background: rgba(20, 20, 30, 0.98);
            color: #e0e0e0;
            padding: 12px 15px;
            border-radius: 8px;
            font-size: 13px;
            line-height: 1.5;
            width: 280px;
            max-width: calc(100vw - 40px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(102, 126, 234, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 10000;
            pointer-events: none;
        }

        .term-tooltip.active {
            opacity: 1;
            visibility: visible;
        }

        .more-info-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            margin: 0 auto;
        }

        .more-info-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .more-info-btn.active .btn-icon {
            transform: rotate(180deg);
        }

        .btn-icon {
            transition: transform 0.3s ease;
        }

        .theory-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            margin-top: 20px;
        }

        .theory-details.active {
            max-height: 2000px;
        }

        .theory-block {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .theory-block h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .theory-block p {
            line-height: 1.7;
            color: #d0d0d0;
            margin-bottom: 12px;
        }

        .theory-block ul {
            margin: 15px 0;
            padding-left: 25px;
        }

        .theory-block li {
            color: #b0b0b0;
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .theory-block li strong {
            color: #e0e0e0;
        }

        .note {
            background: rgba(102, 126, 234, 0.1);
            border-left: 3px solid #667eea;
            padding: 12px;
            border-radius: 5px;
            font-size: 14px;
            margin-top: 15px;
        }

        .highlight {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(102, 126, 234, 0.3);
            margin-top: 15px;
        }

        .controls {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-group {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .train-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .train-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .train-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .mode-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .mode-btn.active {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .mode-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .slider-container {
            flex: 1;
            min-width: 200px;
        }

        .slider-label {
            margin-bottom: 8px;
            font-size: 14px;
            color: #a0a0a0;
        }

        input[type="range"] {
            width: 100%;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
        }

        .progress-container {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            display: none;
        }

        .progress-container.active {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .status-text {
            font-size: 14px;
            color: #a0a0a0;
            text-align: center;
        }

        .visualization {
            display: none;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .visualization.active {
            display: flex;
        }

        .viz-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .viz-title {
            text-align: center;
            margin-bottom: 15px;
            font-size: 18px;
            color: #667eea;
        }

        canvas {
            border-radius: 8px;
            image-rendering: pixelated;
            background: #000;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 600px;
            margin: 0 auto;
        }

        .filter-item {
            position: relative;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .filter-item:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .filter-canvas {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 4px;
            background: #000;
            image-rendering: pixelated;
        }

        .filter-preview {
            position: fixed;
            background: rgba(20, 20, 30, 0.98);
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);
            z-index: 1000;
            display: none;
            pointer-events: none;
        }

        .filter-preview.active {
            display: block;
        }

        .filter-preview-canvas {
            width: 224px;
            height: 224px;
            image-rendering: pixelated;
            border-radius: 8px;
            background: #000;
        }

        .filter-preview-title {
            color: #667eea;
            font-size: 14px;
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
        }

        .filters-explanation {
            background: rgba(102, 126, 234, 0.1);
            border-left: 3px solid #667eea;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        .filters-explanation h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .filters-explanation p {
            line-height: 1.6;
            color: #b0b0b0;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .filters-explanation ul {
            color: #b0b0b0;
            font-size: 14px;
            margin-left: 20px;
            line-height: 1.6;
        }

        .error-stats {
            margin-top: 15px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            font-size: 13px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin: 5px 0;
            padding: 3px 0;
        }

        .stat-label {
            color: #888;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-value {
            color: #667eea;
            font-weight: 600;
            font-family: 'Courier New', monospace;
            display: inline-block;
            vertical-align: baseline;
        }

        .help-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            font-size: 11px;
            cursor: help;
            position: relative;
            transition: background 0.3s ease;
        }

        .help-icon:hover {
            background: rgba(102, 126, 234, 0.4);
        }

        .help-icon .tooltip {
            position: absolute;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(20, 20, 30, 0.95);
            color: #e0e0e0;
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            line-height: 1.5;
            white-space: nowrap;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(102, 126, 234, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 1000;
            pointer-events: none;
        }

        .help-icon:hover .tooltip {
            opacity: 1;
            visibility: visible;
        }

        .help-icon .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: rgba(20, 20, 30, 0.95);
        }

        .tooltip-content {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .tooltip-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            padding: 2px 4px;
            border-radius: 4px;
            transition: background 0.3s ease;
        }

        .tooltip-item.active {
            background: rgba(102, 126, 234, 0.2);
            box-shadow: 0 0 0 1px rgba(102, 126, 234, 0.4);
        }

        .tooltip-item.active .tooltip-range {
            color: #818cf8;
            text-shadow: 0 0 8px rgba(102, 126, 234, 0.5);
        }

        .tooltip-item.active .tooltip-desc {
            color: #e0e0e0;
        }

        .tooltip-range {
            color: #667eea;
            font-weight: 600;
            min-width: 90px;
        }

        .tooltip-desc {
            color: #b0b0b0;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .checkbox-label {
            font-size: 14px;
            color: #b0b0b0;
            cursor: pointer;
            user-select: none;
        }

        .checkbox-container:hover .checkbox-label {
            color: #e0e0e0;
        }

        .neuron-analysis {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .analysis-controls {
            margin-bottom: 25px;
        }

        .activation-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .analysis-panels {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .analysis-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
        }

        .analysis-title {
            text-align: center;
            margin-bottom: 12px;
            font-size: 14px;
            color: #a0a0a0;
            font-weight: 500;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .wide-tooltip {
            width: 380px;
            white-space: normal;
        }

        .wide-tooltip .tooltip-content {
            text-align: left;
            line-height: 1.6;
        }

        .tooltip-header {
            font-weight: 600;
            margin-bottom: 8px;
            color: #e0e0e0;
        }

        .tooltip-text {
            margin-bottom: 8px;
            color: #b0b0b0;
            font-size: 12px;
            line-height: 1.5;
        }

        .tooltip-colors {
            margin-top: 8px;
        }

        .color-item {
            display: flex;
            align-items: center;
            white-space: nowrap;
            margin: 4px 0;
            font-size: 12px;
            color: #b0b0b0;
        }

        .analysis-panel canvas {
            border-radius: 8px;
            background: #000;
            image-rendering: pixelated;
        }

        .info-panel {
            background: rgba(102, 126, 234, 0.1);
            border-left: 3px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-panel h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .info-panel p {
            line-height: 1.6;
            color: #b0b0b0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß† –ú–∞—à–∏–Ω–∞ –ë–æ–ª—å—Ü–º–∞–Ω–∞</h1>
        
        <div class="theory-section">
            <div class="theory-intro">
                <p><strong>–ú–∞—à–∏–Ω–∞ –ë–æ–ª—å—Ü–º–∞–Ω–∞</strong> ‚Äî —ç—Ç–æ —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–π –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏, –æ—Ç–Ω–æ—Å—è—â–∞—è—Å—è –∫ <span class="term-highlight" data-tooltip="–°—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å - –º–æ–¥–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –≥–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º, —Å—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.">—Å—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏–º</span> <span class="term-highlight" data-tooltip="–†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–∞—è –º–æ–¥–µ–ª—å - –Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏, –≥–¥–µ –≤—ã—Ö–æ–¥—ã –Ω–µ–π—Ä–æ–Ω–æ–≤ –º–æ–≥—É—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –∏—Ö –∂–µ –≤—Ö–æ–¥—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ç–∏ –∏–º–µ—Ç—å –ø–∞–º—è—Ç—å –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.">—Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–º –º–æ–¥–µ–ª—è–º</span> –∏ —è–≤–ª—è—é—â–∞—è—Å—è <span class="term-highlight" data-tooltip="–ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å - –º–æ–¥–µ–ª—å –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è, —Å–ø–æ—Å–æ–±–Ω–∞—è –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –æ–±—É—á–∞—é—â—É—é –≤—ã–±–æ—Ä–∫—É. –ò–∑—É—á–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —ç—Ç–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.">–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–æ–¥–µ–ª—å—é</span>. –û–Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–∑–∏–∫–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–Ω—è—Ç–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏. –£–∑–ª—ã (–Ω–µ–π—Ä–æ–Ω—ã) –º–∞—à–∏–Ω—ã –ë–æ–ª—å—Ü–º–∞–Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—è –ø–æ –≤–µ—Å–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–º –ø—Ä–æ–± –∏ –æ—à–∏–±–æ–∫ (self-learning).</p>
                <button id="moreInfoBtn" class="more-info-btn">
                    <span class="btn-text">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</span>
                    <span class="btn-icon">‚ñº</span>
                </button>
            </div>
            
            <div class="theory-details" id="theoryDetails">
                <div class="theory-block">
                    <h3>üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ç–∏</h3>
                    <p>–°–µ—Ç—å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤:</p>
                    <ul>
                        <li><strong>–í–∏–¥–∏–º—ã–µ —É–∑–ª—ã</strong> ‚Äî –ø–æ–ª—É—á–∞—é—Ç –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li>
                        <li><strong>–°–∫—Ä—ã—Ç—ã–µ —É–∑–ª—ã</strong> ‚Äî –≤—ã—è–≤–ª—è—é—Ç —Å–∫—Ä—ã—Ç—ã–µ (–ª–∞—Ç–µ–Ω—Ç–Ω—ã–µ) –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤ –¥–∞–Ω–Ω—ã—Ö</li>
                    </ul>
                    <p>–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π, –º–∞—à–∏–Ω–∞ –ë–æ–ª—å—Ü–º–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç <strong>—Å—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏</strong>: –æ–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã –≤—ã—Ö–æ–¥–∞, –∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—É—Ç–µ–º –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏ —Å–∏—Å—Ç–µ–º—ã.</p>
                </div>

                <div class="theory-block">
                    <h3>üéØ –ó–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞–µ—Ç –º–∞—à–∏–Ω–∞ –ë–æ–ª—å—Ü–º–∞–Ω–∞</h3>
                    <ul>
                        <li><strong>–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π</strong> –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π</li>
                        <li><strong>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)</li>
                        <li><strong>–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤</strong> –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è</li>
                        <li><strong>–ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–¥–∞—á–∞ –∫–æ–º–º–∏–≤–æ—è–∂—ë—Ä–∞)</li>
                        <li><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–±–æ—Ä —Ñ–∏–ª—å–º–æ–≤ ‚Äî –æ–±—É—á–µ–Ω–∏–µ –±–µ–∑ —É—á–∏—Ç–µ–ª—è)</li>
                        <li><strong>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –≤—ã—è–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞ –≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö)</li>
                        <li><strong>–°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</strong> –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥–µ–ª—è—Ö</li>
                    </ul>
                    <p class="note">–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —É—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã–µ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ <strong>–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –º–∞—à–∏–Ω–∞ –ë–æ–ª—å—Ü–º–∞–Ω–∞ (RBM)</strong>, –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏.</p>
                </div>

                <div class="theory-block">
                    <h3>üìö –ò—Å—Ç–æ—Ä–∏—è –∏ —Å–æ–∑–¥–∞—Ç–µ–ª–∏</h3>
                    <p>–ú–∞—à–∏–Ω–∞ –ë–æ–ª—å—Ü–º–∞–Ω–∞ –±—ã–ª–∞ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∞ –≤ <strong>1985 –≥–æ–¥—É</strong> –±—Ä–∏—Ç–∞–Ω—Å–∫–∏–º –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–º <strong>–î–∂–µ—Ñ—Ñ—Ä–∏ –•–∏–Ω—Ç–æ–Ω–æ–º</strong> (Geoffrey Hinton) —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å –¢–µ—Ä—Ä–∏ –°–µ–π–Ω–æ–≤—Å–∫–∏ –∏ –î—ç–≤–∏–¥–æ–º –ê–∫–ª–∏, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –∏–¥–µ–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–∑–∏–∫–∏ –∏ –º–æ–¥–µ–ª–∏ —Å–ø–∏–Ω–æ–≤–æ–≥–æ —Å—Ç–µ–∫–ª–∞.</p>
                    <p>–•–∏–Ω—Ç–æ–Ω –≤–ø–µ—Ä–≤—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª –∞–ª–≥–æ—Ä–∏—Ç–º –æ–±—É—á–µ–Ω–∏—è –º–∞—à–∏–Ω—ã –ë–æ–ª—å—Ü–º–∞–Ω–∞ –≤ –¥–æ–∫–ª–∞–¥–µ –≤ 1983 –≥–æ–¥—É, –∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ 1985 –≥–æ–¥—É.</p>
                    <p class="highlight">üèÜ –í 2024 –≥–æ–¥—É –•–∏–Ω—Ç–æ–Ω –ø–æ–ª—É—á–∏–ª <strong>–ù–æ–±–µ–ª–µ–≤—Å–∫—É—é –ø—Ä–µ–º–∏—é –ø–æ —Ñ–∏–∑–∏–∫–µ</strong> –∑–∞ —Å–≤–æ–∏ —Ä–∞–±–æ—Ç—ã, –≤–∫–ª—é—á–∞—è –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –º–∞—à–∏–Ω—ã –ë–æ–ª—å—Ü–º–∞–Ω–∞.</p>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <button id="trainBtn" class="train-btn">–û–±—É—á–∏—Ç—å —Å–µ—Ç—å</button>
                <button id="loadBtn" class="train-btn" style="display: none; background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –≤–µ—Å–∞</button>
                <label class="checkbox-container">
                    <input type="checkbox" id="saveWeightsCheckbox" checked>
                    <span class="checkbox-label">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–µ—Å–∞ –≤ Local Storage</span>
                </label>
                <button class="mode-btn active" data-mode="sample" style="display: none;">–û–±—Ä–∞–∑–µ—Ü</button>
                <button class="mode-btn" data-mode="filters" style="display: none;">–§–∏–ª—å—Ç—Ä—ã</button>
                <div class="slider-container" id="sliderContainer" style="display: none;">
                    <div class="slider-label">–ò–Ω–¥–µ–∫—Å –æ–±—Ä–∞–∑—Ü–∞: <span id="indexValue">0</span></div>
                    <input type="range" id="sampleSlider" min="0" max="1999" value="0">
                </div>
            </div>
            
            <div class="progress-container" id="progressContainer">
                <div class="status-text" id="statusText">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="info-panel" id="infoPanel">
            <h3>‚ÑπÔ∏è –ù–∞—á–Ω–∏—Ç–µ —Å –æ–±—É—á–µ–Ω–∏—è</h3>
            <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–±—É—á–∏—Ç—å —Å–µ—Ç—å" –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±—É—á–µ–Ω–∏—è RBM –Ω–∞ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–µ MNIST (2000 –æ–±—Ä–∞–∑—Ü–æ–≤). 
            –û–±—É—á–µ–Ω–∏–µ –∑–∞–π–º–µ—Ç –æ–∫–æ–ª–æ 30-60 —Å–µ–∫—É–Ω–¥. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ç–∏ –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö.</p>
        </div>

        <div class="visualization" id="sampleViz">
            <div class="viz-panel">
                <div class="viz-title">–û—Ä–∏–≥–∏–Ω–∞–ª</div>
                <canvas id="originalCanvas" width="224" height="224"></canvas>
            </div>
            <div class="viz-panel">
                <div class="viz-title">–†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</div>
                <canvas id="reconstructionCanvas" width="224" height="224"></canvas>
                <div class="error-stats">
                    <div class="stat-item">
                        <span class="stat-label">
                            MSE:
                            <span class="help-icon" id="mseHelpIcon">
                                ?
                                <div class="tooltip">
                                    <div class="tooltip-content">
                                        <div class="tooltip-item" data-range="excellent">
                                            <span class="tooltip-range">&lt; 0.01</span>
                                            <span class="tooltip-desc">–æ—Ç–ª–∏—á–Ω–∞—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</span>
                                        </div>
                                        <div class="tooltip-item" data-range="good">
                                            <span class="tooltip-range">0.01-0.05</span>
                                            <span class="tooltip-desc">—Ö–æ—Ä–æ—à–∞—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</span>
                                        </div>
                                        <div class="tooltip-item" data-range="poor">
                                            <span class="tooltip-range">&gt; 0.05</span>
                                            <span class="tooltip-desc">–∑–∞–º–µ—Ç–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è</span>
                                        </div>
                                    </div>
                                </div>
                            </span>
                        </span>
                        <span class="stat-value" id="mseValue">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å:</span>
                        <span class="stat-value" id="errorPercent">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">–ò–∑–º–µ–Ω–µ–Ω–æ –ø–∏–∫—Å–µ–ª–µ–π:</span>
                        <span class="stat-value" id="pixelsDiff">-</span>
                    </div>
                </div>
            </div>
            <div class="viz-panel">
                <div class="viz-title">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∫—Ä—ã—Ç—ã—Ö –Ω–µ–π—Ä–æ–Ω–æ–≤</div>
                <canvas id="hiddenCanvas" width="224" height="224"></canvas>
            </div>
        </div>

        <!-- –ù–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ–π—Ä–æ–Ω–æ–≤ -->
        <div class="neuron-analysis" id="neuronAnalysis" style="display: none;">
            <div class="analysis-controls">
                <div class="slider-container">
                    <div class="slider-label">–ù–µ–π—Ä–æ–Ω: <span id="neuronValue">0</span> <span class="activation-badge" id="activationValue">0.00</span></div>
                    <input type="range" id="neuronSlider" min="0" max="63" value="0">
                </div>
            </div>
            <div class="analysis-panels">
                <div class="analysis-panel">
                    <div class="analysis-title">
                        –§–∏–ª—å—Ç—Ä –Ω–µ–π—Ä–æ–Ω–∞
                        <span class="help-icon">
                            ?
                            <div class="tooltip wide-tooltip">
                                <div class="tooltip-content">
                                    <div class="tooltip-header">–§–∏–ª—å—Ç—Ä –Ω–µ–π—Ä–æ–Ω–∞</div>
                                    <div class="tooltip-text">
                                        –ß–∏—Å—Ç—ã–µ –≤–µ—Å–∞ –Ω–µ–π—Ä–æ–Ω–∞ –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π<br>
                                        –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞ –∫–∞–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã "–Ω–∞—Å—Ç—Ä–æ–µ–Ω" –Ω–µ–π—Ä–æ–Ω
                                    </div>
                                    <div class="tooltip-colors">
                                        <div class="color-item">
                                            <span style="color: #6495ED">–°–∏–Ω–∏–π</span> = –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞
                                        </div>
                                        <div class="color-item">
                                            <span style="color: #FF6B6B">–ö—Ä–∞—Å–Ω—ã–π</span> = –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </span>
                    </div>
                    <canvas id="neuronFilterCanvas" width="168" height="168"></canvas>
                </div>
                <div class="analysis-panel">
                    <div class="analysis-title">
                        –ù–∞–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ–±—Ä–∞–∑–µ—Ü
                        <span class="help-icon">
                            ?
                            <div class="tooltip wide-tooltip">
                                <div class="tooltip-content">
                                    <div class="tooltip-header">–ù–∞–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ–±—Ä–∞–∑–µ—Ü</div>
                                    <div class="tooltip-text">
                                        –ö–æ–º–±–∏–Ω–∞—Ü–∏—è: –æ—Ä–∏–≥–∏–Ω–∞–ª + —Ñ–∏–ª—å—Ç—Ä √ó –∞–∫—Ç–∏–≤–∞—Ü–∏—è √ó 0.3<br>
                                        –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä "–≤–∏–¥–∏—Ç" –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü<br>
                                        –í–∏–¥–Ω—ã –∫–æ–Ω—Ç—É—Ä—ã —Ü–∏—Ñ—Ä—ã —Å –Ω–∞–ª–æ–∂–µ–Ω–Ω—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º<br>
                                        –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –Ω–µ–π—Ä–æ–Ω–∞
                                    </div>
                                </div>
                            </div>
                        </span>
                    </div>
                    <canvas id="neuronOverlayCanvas" width="168" height="168"></canvas>
                </div>
                <div class="analysis-panel">
                    <div class="analysis-title">
                        –í–∫–ª–∞–¥ –≤ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
                        <span class="help-icon">
                            ?
                            <div class="tooltip wide-tooltip">
                                <div class="tooltip-content">
                                    <div class="tooltip-header">–í–∫–ª–∞–¥ –≤ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é</div>
                                    <div class="tooltip-text">
                                        –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≤–∫–ª–∞–¥ –Ω–µ–π—Ä–æ–Ω–∞ –≤ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é<br>
                                        –ß–µ—Ä–Ω—ã–π = –Ω–µ–π—Ä–æ–Ω –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω (–Ω–µ—Ç –≤–∫–ª–∞–¥–∞)<br>
                                        –Ø—Ä–∫–∏–µ –æ–±–ª–∞—Å—Ç–∏ = –Ω–µ–π—Ä–æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å<br>
                                        Hot colormap: —á–µ—Ä–Ω—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π ‚Üí –∂–µ–ª—Ç—ã–π ‚Üí –±–µ–ª—ã–π
                                    </div>
                                </div>
                            </div>
                        </span>
                    </div>
                    <canvas id="neuronContributionCanvas" width="168" height="168"></canvas>
                </div>
            </div>
        </div>

        <div class="visualization" id="filtersViz">
            <div class="filters-explanation">
                <h3>üìä –ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–∏–ª—å—Ç—Ä—ã?</h3>
                <p>–§–∏–ª—å—Ç—Ä—ã ‚Äî —ç—Ç–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –≤—Ö–æ–¥–Ω—ã–º —Å–ª–æ–µ–º –∏ –∫–∞–∂–¥—ã–º —Å–∫—Ä—ã—Ç—ã–º –Ω–µ–π—Ä–æ–Ω–æ–º. –ö–∞–∂–¥—ã–π –∫–≤–∞–¥—Ä–∞—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã "–≤—ã—É—á–∏–ª" –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –Ω–µ–π—Ä–æ–Ω.</p>
                <p><strong>–ö–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å:</strong></p>
                <ul>
                    <li>–°–≤–µ—Ç–ª—ã–µ –æ–±–ª–∞—Å—Ç–∏ ‚Äî –ø—Ä–∏–∑–Ω–∞–∫–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–π—Ä–æ–Ω —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ</li>
                    <li>–¢–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ ‚Äî –ø—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–π—Ä–æ–Ω "–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç"</li>
                    <li>–ü–∞—Ç—Ç–µ—Ä–Ω—ã –º–æ–≥—É—Ç –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å —á–∞—Å—Ç–∏ —Ü–∏—Ñ—Ä: —à—Ç—Ä–∏—Ö–∏, –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏—è, —É–≥–ª—ã</li>
                </ul>
                <p>üí° <em>–ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</em></p>
            </div>
            <div class="filters-grid" id="filtersGrid"></div>
            <div class="filter-preview" id="filterPreview">
                <canvas class="filter-preview-canvas" id="filterPreviewCanvas"></canvas>
                <div class="filter-preview-title" id="filterPreviewTitle">–§–∏–ª—å—Ç—Ä #0</div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let rbm = null;
        let mnistData = null;
        let currentMode = 'sample'; // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
        let isTraining = false;

        // –ö–ª–∞—Å—Å RBM
        class BernoulliRBM {
            constructor(nVisible, nHidden, learningRate = 0.06, batchSize = 32) {
                this.nVisible = nVisible;
                this.nHidden = nHidden;
                this.learningRate = learningRate;
                this.batchSize = batchSize;
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ –∏ —Å–º–µ—â–µ–Ω–∏–π
                this.weights = this.randomMatrix(nHidden, nVisible, 0.01);
                this.hiddenBias = new Float32Array(nHidden);
                this.visibleBias = new Float32Array(nVisible);
            }

            randomMatrix(rows, cols, scale) {
                const matrix = [];
                for (let i = 0; i < rows; i++) {
                    matrix[i] = new Float32Array(cols);
                    for (let j = 0; j < cols; j++) {
                        matrix[i][j] = (Math.random() - 0.5) * 2 * scale;
                    }
                }
                return matrix;
            }

            sigmoid(x) {
                return 1 / (1 + Math.exp(-x));
            }

            sampleHidden(visible) {
                const hidden = new Float32Array(this.nHidden);
                for (let i = 0; i < this.nHidden; i++) {
                    let activation = this.hiddenBias[i];
                    for (let j = 0; j < this.nVisible; j++) {
                        activation += visible[j] * this.weights[i][j];
                    }
                    hidden[i] = this.sigmoid(activation);
                }
                return hidden;
            }

            sampleVisible(hidden) {
                const visible = new Float32Array(this.nVisible);
                for (let i = 0; i < this.nVisible; i++) {
                    let activation = this.visibleBias[i];
                    for (let j = 0; j < this.nHidden; j++) {
                        activation += hidden[j] * this.weights[j][i];
                    }
                    visible[i] = this.sigmoid(activation);
                }
                return visible;
            }

            contrastiveDivergence(batch) {
                const batchSize = batch.length;
                
                // –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã
                const weightGrad = this.randomMatrix(this.nHidden, this.nVisible, 0);
                const hiddenGrad = new Float32Array(this.nHidden);
                const visibleGrad = new Float32Array(this.nVisible);

                for (let sample of batch) {
                    // Positive phase
                    const hiddenProb = this.sampleHidden(sample);
                    
                    // Negative phase
                    const visibleRecon = this.sampleVisible(hiddenProb);
                    const hiddenRecon = this.sampleHidden(visibleRecon);

                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
                    for (let i = 0; i < this.nHidden; i++) {
                        for (let j = 0; j < this.nVisible; j++) {
                            weightGrad[i][j] += (hiddenProb[i] * sample[j] - hiddenRecon[i] * visibleRecon[j]) / batchSize;
                        }
                        hiddenGrad[i] += (hiddenProb[i] - hiddenRecon[i]) / batchSize;
                    }

                    for (let i = 0; i < this.nVisible; i++) {
                        visibleGrad[i] += (sample[i] - visibleRecon[i]) / batchSize;
                    }
                }

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                for (let i = 0; i < this.nHidden; i++) {
                    for (let j = 0; j < this.nVisible; j++) {
                        this.weights[i][j] += this.learningRate * weightGrad[i][j];
                    }
                    this.hiddenBias[i] += this.learningRate * hiddenGrad[i];
                }

                for (let i = 0; i < this.nVisible; i++) {
                    this.visibleBias[i] += this.learningRate * visibleGrad[i];
                }
            }

            async fit(data, nEpochs = 15, progressCallback) {
                const nSamples = data.length;
                const nBatches = Math.floor(nSamples / this.batchSize);

                for (let epoch = 0; epoch < nEpochs; epoch++) {
                    // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
                    const indices = Array.from({length: nSamples}, (_, i) => i);
                    for (let i = indices.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [indices[i], indices[j]] = [indices[j], indices[i]];
                    }

                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–µ–π —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –ø–∞—É–∑–∞–º–∏
                    for (let batchIdx = 0; batchIdx < nBatches; batchIdx++) {
                        const batch = [];
                        for (let i = 0; i < this.batchSize; i++) {
                            const idx = indices[batchIdx * this.batchSize + i];
                            batch.push(data[idx]);
                        }
                        this.contrastiveDivergence(batch);
                        
                        // –î–∞–µ–º –±—Ä–∞—É–∑–µ—Ä—É –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∫–∞–∂–¥—ã–µ 5 –±–∞—Ç—á–µ–π
                        if (batchIdx % 5 === 0) {
                            await new Promise(resolve => setTimeout(resolve, 0));
                        }
                    }

                    if (progressCallback) {
                        progressCallback(epoch + 1, nEpochs);
                    }
                    
                    // –ü–∞—É–∑–∞ –º–µ–∂–¥—É —ç–ø–æ—Ö–∞–º–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
                    await new Promise(resolve => setTimeout(resolve, 10));
                }
            }

            reconstruct(sample) {
                const hidden = this.sampleHidden(sample);
                const reconstruction = this.sampleVisible(hidden);
                return { reconstruction, hidden };
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Å–æ–≤ –≤ Local Storage
            saveToLocalStorage() {
                const data = {
                    nVisible: this.nVisible,
                    nHidden: this.nHidden,
                    weights: this.weights.map(row => Array.from(row)),
                    hiddenBias: Array.from(this.hiddenBias),
                    visibleBias: Array.from(this.visibleBias),
                    timestamp: Date.now()
                };
                
                try {
                    const compressed = JSON.stringify(data);
                    localStorage.setItem('rbm_weights', compressed);
                    console.log('‚úÖ –í–µ—Å–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Local Storage');
                    return true;
                } catch (e) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—Å–æ–≤:', e);
                    return false;
                }
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–µ—Å–æ–≤ –∏–∑ Local Storage
            static loadFromLocalStorage() {
                try {
                    const compressed = localStorage.getItem('rbm_weights');
                    if (!compressed) return null;
                    
                    const data = JSON.parse(compressed);
                    const rbm = new BernoulliRBM(data.nVisible, data.nHidden);
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–µ—Å–∞
                    rbm.weights = data.weights.map(row => new Float32Array(row));
                    rbm.hiddenBias = new Float32Array(data.hiddenBias);
                    rbm.visibleBias = new Float32Array(data.visibleBias);
                    
                    console.log('‚úÖ –í–µ—Å–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ Local Storage');
                    return rbm;
                } catch (e) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–µ—Å–æ–≤:', e);
                    return null;
                }
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π —Ü–∏—Ñ—Ä—ã
        function generateDigit(digit, variation = 0) {
            const canvas = new Float32Array(784);
            
            // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤–∞—Ä–∏–∞—Ü–∏–∏
            const angle = (variation * 0.1 - 0.5) * 0.3; // –ù–∞–∫–ª–æ–Ω
            const thickness = 1.5 + variation * 0.2; // –¢–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏
            const offsetX = (variation * 0.2 - 0.1) * 4; // –°–º–µ—â–µ–Ω–∏–µ –ø–æ X
            const offsetY = (variation * 0.2 - 0.1) * 4; // –°–º–µ—â–µ–Ω–∏–µ –ø–æ Y
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –ª–∏–Ω–∏–∏
            function drawLine(x1, y1, x2, y2, intensity = 1.0) {
                const steps = Math.max(Math.abs(x2 - x1), Math.abs(y2 - y1)) * 2;
                for (let i = 0; i <= steps; i++) {
                    const t = i / steps;
                    const x = x1 + (x2 - x1) * t;
                    const y = y1 + (y2 - y1) * t;
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–≤–æ—Ä–æ—Ç
                    const xRot = (x - 14) * Math.cos(angle) - (y - 14) * Math.sin(angle) + 14 + offsetX;
                    const yRot = (x - 14) * Math.sin(angle) + (y - 14) * Math.cos(angle) + 14 + offsetY;
                    
                    // –†–∏—Å—É–µ–º —Ç–æ—á–∫—É —Å —Ä–∞–∑–º—ã—Ç–∏–µ–º
                    for (let dy = -2; dy <= 2; dy++) {
                        for (let dx = -2; dx <= 2; dx++) {
                            const px = Math.round(xRot + dx);
                            const py = Math.round(yRot + dy);
                            if (px >= 0 && px < 28 && py >= 0 && py < 28) {
                                const dist = Math.sqrt(dx * dx + dy * dy);
                                const value = Math.exp(-dist * dist / (thickness * thickness)) * intensity;
                                canvas[py * 28 + px] = Math.min(1, canvas[py * 28 + px] + value);
                            }
                        }
                    }
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è —ç–ª–ª–∏–ø—Å–∞
            function drawEllipse(cx, cy, rx, ry, intensity = 1.0, filled = false) {
                for (let angle = 0; angle < Math.PI * 2; angle += 0.05) {
                    const x = cx + rx * Math.cos(angle);
                    const y = cy + ry * Math.sin(angle);
                    const nextX = cx + rx * Math.cos(angle + 0.05);
                    const nextY = cy + ry * Math.sin(angle + 0.05);
                    drawLine(x, y, nextX, nextY, intensity);
                }
                if (filled) {
                    for (let y = cy - ry; y <= cy + ry; y += 0.5) {
                        for (let x = cx - rx; x <= cx + rx; x += 0.5) {
                            if ((x - cx) * (x - cx) / (rx * rx) + (y - cy) * (y - cy) / (ry * ry) <= 1) {
                                const px = Math.round(x);
                                const py = Math.round(y);
                                if (px >= 0 && px < 28 && py >= 0 && py < 28) {
                                    canvas[py * 28 + px] = Math.min(1, canvas[py * 28 + px] + intensity * 0.3);
                                }
                            }
                        }
                    }
                }
            }
            
            // –†–∏—Å—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ü–∏—Ñ—Ä—ã
            switch(digit) {
                case 0:
                    drawEllipse(14, 14, 5, 7, 0.9);
                    break;
                    
                case 1:
                    drawLine(14, 6, 14, 22, 0.9);
                    drawLine(14, 6, 11, 9, 0.7);
                    break;
                    
                case 2:
                    drawLine(9, 10, 13, 6, 0.8);
                    drawLine(13, 6, 17, 8, 0.8);
                    drawLine(17, 8, 14, 14, 0.8);
                    drawLine(14, 14, 9, 22, 0.8);
                    drawLine(9, 22, 19, 22, 0.8);
                    break;
                    
                case 3:
                    drawLine(9, 8, 17, 8, 0.8);
                    drawLine(17, 8, 13, 14, 0.8);
                    drawLine(13, 14, 17, 14, 0.7);
                    drawLine(17, 14, 17, 18, 0.8);
                    drawLine(17, 18, 13, 22, 0.8);
                    drawLine(13, 22, 9, 20, 0.8);
                    break;
                    
                case 4:
                    drawLine(16, 6, 10, 16, 0.8);
                    drawLine(10, 16, 20, 16, 0.8);
                    drawLine(16, 6, 16, 22, 0.9);
                    break;
                    
                case 5:
                    drawLine(18, 8, 10, 8, 0.8);
                    drawLine(10, 8, 10, 14, 0.8);
                    drawLine(10, 14, 16, 12, 0.8);
                    drawLine(16, 12, 18, 14, 0.8);
                    drawLine(18, 14, 18, 18, 0.8);
                    drawLine(18, 18, 14, 22, 0.8);
                    drawLine(14, 22, 9, 21, 0.8);
                    break;
                    
                case 6:
                    drawLine(16, 8, 12, 8, 0.8);
                    drawLine(12, 8, 10, 14, 0.8);
                    drawLine(10, 14, 10, 18, 0.8);
                    drawLine(10, 18, 14, 22, 0.8);
                    drawLine(14, 22, 18, 18, 0.8);
                    drawLine(18, 18, 18, 15, 0.8);
                    drawLine(18, 15, 14, 14, 0.8);
                    drawLine(14, 14, 10, 15, 0.8);
                    break;
                    
                case 7:
                    drawLine(9, 8, 19, 8, 0.9);
                    drawLine(19, 8, 14, 22, 0.9);
                    drawLine(12, 14, 16, 14, 0.5);
                    break;
                    
                case 8:
                    drawEllipse(14, 10, 4, 4, 0.8);
                    drawEllipse(14, 18, 4.5, 4, 0.8);
                    break;
                    
                case 9:
                    drawEllipse(14, 11, 4, 4, 0.8);
                    drawLine(18, 11, 18, 16, 0.8);
                    drawLine(18, 16, 16, 20, 0.8);
                    drawLine(16, 20, 12, 21, 0.8);
                    break;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ª–µ–≥–∫–∏–π —à—É–º –∏ —Ä–∞–∑–º—ã—Ç–∏–µ
            const blurred = new Float32Array(784);
            for (let y = 0; y < 28; y++) {
                for (let x = 0; x < 28; x++) {
                    let sum = 0;
                    let count = 0;
                    for (let dy = -1; dy <= 1; dy++) {
                        for (let dx = -1; dx <= 1; dx++) {
                            const ny = y + dy;
                            const nx = x + dx;
                            if (ny >= 0 && ny < 28 && nx >= 0 && nx < 28) {
                                const weight = (dx === 0 && dy === 0) ? 4 : 1;
                                sum += canvas[ny * 28 + nx] * weight;
                                count += weight;
                            }
                        }
                    }
                    blurred[y * 28 + x] = sum / count;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –ª–µ–≥–∫–∏–π —à—É–º
                    blurred[y * 28 + x] += (Math.random() - 0.5) * 0.05;
                    blurred[y * 28 + x] = Math.max(0, Math.min(1, blurred[y * 28 + x]));
                }
            }
            
            return blurred;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞ MNIST
        async function loadMNIST() {
            const nSamples = 2000;
            const data = [];
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ 200 –æ–±—Ä–∞–∑—Ü–æ–≤ –∫–∞–∂–¥–æ–π —Ü–∏—Ñ—Ä—ã —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏
            for (let i = 0; i < nSamples; i++) {
                const digit = Math.floor(i / 200); // 200 –æ–±—Ä–∞–∑—Ü–æ–≤ –Ω–∞ —Ü–∏—Ñ—Ä—É
                const variation = (i % 200) / 200; // –í–∞—Ä–∏–∞—Ü–∏—è –æ—Ç 0 –¥–æ 1
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å –∫ –≤–∞—Ä–∏–∞—Ü–∏–∏
                const randomVariation = variation + Math.random() * 0.1;
                
                const sample = generateDigit(digit, randomVariation);
                data.push(sample);
            }
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            for (let i = data.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [data[i], data[j]] = [data[j], data[i]];
            }
            
            return data;
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –Ω–∞ canvas
        function drawImage(canvas, data, width, height) {
            const ctx = canvas.getContext('2d');
            const imageData = ctx.createImageData(canvas.width, canvas.height);
            const scale = canvas.width / width;
            
            for (let y = 0; y < canvas.height; y++) {
                for (let x = 0; x < canvas.width; x++) {
                    const srcX = Math.floor(x / scale);
                    const srcY = Math.floor(y / scale);
                    const value = data[srcY * width + srcX] * 255;
                    const idx = (y * canvas.width + x) * 4;
                    
                    imageData.data[idx] = value;
                    imageData.data[idx + 1] = value;
                    imageData.data[idx + 2] = value;
                    imageData.data[idx + 3] = 255;
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º–æ–π
        function drawImageColored(canvas, data, width, height, colormap = 'gray') {
            const ctx = canvas.getContext('2d');
            const imageData = ctx.createImageData(canvas.width, canvas.height);
            const scale = canvas.width / width;
            
            for (let y = 0; y < canvas.height; y++) {
                for (let x = 0; x < canvas.width; x++) {
                    const srcX = Math.floor(x / scale);
                    const srcY = Math.floor(y / scale);
                    const value = data[srcY * width + srcX];
                    const idx = (y * canvas.width + x) * 4;
                    
                    if (colormap === 'bwr') {
                        // Blue-White-Red colormap
                        const normalized = Math.max(-1, Math.min(1, value));
                        if (normalized < 0) {
                            // Blue to white
                            const intensity = Math.abs(normalized);
                            imageData.data[idx] = 255 * (1 - intensity);
                            imageData.data[idx + 1] = 255 * (1 - intensity);
                            imageData.data[idx + 2] = 255;
                        } else {
                            // White to red
                            const intensity = normalized;
                            imageData.data[idx] = 255;
                            imageData.data[idx + 1] = 255 * (1 - intensity);
                            imageData.data[idx + 2] = 255 * (1 - intensity);
                        }
                    } else if (colormap === 'hot') {
                        // Hot colormap
                        const v = Math.max(0, Math.min(1, value));
                        if (v < 0.33) {
                            imageData.data[idx] = v * 3 * 255;
                            imageData.data[idx + 1] = 0;
                            imageData.data[idx + 2] = 0;
                        } else if (v < 0.66) {
                            imageData.data[idx] = 255;
                            imageData.data[idx + 1] = (v - 0.33) * 3 * 255;
                            imageData.data[idx + 2] = 0;
                        } else {
                            imageData.data[idx] = 255;
                            imageData.data[idx + 1] = 255;
                            imageData.data[idx + 2] = (v - 0.66) * 3 * 255;
                        }
                    } else {
                        // Grayscale
                        const grayValue = value * 255;
                        imageData.data[idx] = grayValue;
                        imageData.data[idx + 1] = grayValue;
                        imageData.data[idx + 2] = grayValue;
                    }
                    imageData.data[idx + 3] = 255;
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
        }

        // –û–±—É—á–µ–Ω–∏–µ —Å–µ—Ç–∏
        async function trainNetwork() {
            if (isTraining) return;
            
            isTraining = true;
            const trainBtn = document.getElementById('trainBtn');
            const progressContainer = document.getElementById('progressContainer');
            const statusText = document.getElementById('statusText');
            const progressFill = document.getElementById('progressFill');
            const infoPanel = document.getElementById('infoPanel');
            
            trainBtn.disabled = true;
            progressContainer.classList.add('active');
            infoPanel.style.display = 'none';
            
            statusText.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...';
            progressFill.style.width = '0%';
            
            // –î–∞–µ–º UI –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
            await new Promise(resolve => setTimeout(resolve, 100));
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
            mnistData = await loadMNIST();
            
            statusText.textContent = '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RBM...';
            progressFill.style.width = '10%';
            
            await new Promise(resolve => setTimeout(resolve, 100));
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±—É—á–µ–Ω–∏–µ RBM
            rbm = new BernoulliRBM(784, 64, 0.06, 32);
            
            statusText.textContent = '–û–±—É—á–µ–Ω–∏–µ —Å–µ—Ç–∏...';
            
            // –û–±—É—á–µ–Ω–∏–µ —Å –∫–æ–ª–±—ç–∫–æ–º –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            await rbm.fit(mnistData, 15, (epoch, totalEpochs) => {
                const progress = 10 + (epoch / totalEpochs) * 90;
                progressFill.style.width = progress + '%';
                statusText.textContent = `–û–±—É—á–µ–Ω–∏–µ —Å–µ—Ç–∏... –≠–ø–æ—Ö–∞ ${epoch}/${totalEpochs}`;
            });
            
            statusText.textContent = '–û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!';
            progressFill.style.width = '100%';
            
            setTimeout(() => {
                progressContainer.classList.remove('active');
                trainBtn.textContent = '–ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å —Å–µ—Ç—å';
                trainBtn.disabled = false;
                isTraining = false;
                
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é
                enableVisualization();
                updateVisualization();
            }, 1000);
        }

        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
        function enableVisualization() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Ä–µ–∂–∏–º–æ–≤
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.style.display = 'block';
            });
            
            const sliderContainer = document.getElementById('sliderContainer');
            const neuronAnalysis = document.getElementById('neuronAnalysis');
            
            console.log('enableVisualization called, currentMode:', currentMode); // –û—Ç–ª–∞–¥–∫–∞
            
            if (currentMode === 'sample') {
                document.getElementById('sampleViz').classList.add('active');
                document.getElementById('filtersViz').classList.remove('active');
                if (neuronAnalysis) {
                    neuronAnalysis.style.display = 'block';
                    console.log('Showing neuron widget in enableVisualization');
                }
                sliderContainer.style.display = 'block';
                updateVisualization();
            } else {
                document.getElementById('filtersViz').classList.add('active');
                document.getElementById('sampleViz').classList.remove('active');
                if (neuronAnalysis) {
                    neuronAnalysis.style.display = 'none';
                    console.log('Hiding neuron widget in enableVisualization');
                }
                sliderContainer.style.display = 'none';
                drawFilters();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ MSE –≤ —Ç—É–ª—Ç–∏–ø–µ
        function updateMSETooltip(mseValue) {
            const tooltipItems = document.querySelectorAll('.tooltip-item');
            tooltipItems.forEach(item => item.classList.remove('active'));
            
            if (mseValue < 0.01) {
                document.querySelector('.tooltip-item[data-range="excellent"]').classList.add('active');
            } else if (mseValue <= 0.05) {
                document.querySelector('.tooltip-item[data-range="good"]').classList.add('active');
            } else {
                document.querySelector('.tooltip-item[data-range="poor"]').classList.add('active');
            }
        }

        // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –æ—à–∏–±–∫–∏
        function calculateErrorMetrics(original, reconstruction) {
            let mse = 0;
            let pixelsDifferent = 0;
            const threshold = 0.1; // –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è "–∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ" –ø–∏–∫—Å–µ–ª—è
            
            for (let i = 0; i < original.length; i++) {
                const diff = original[i] - reconstruction[i];
                mse += diff * diff;
                
                if (Math.abs(diff) > threshold) {
                    pixelsDifferent++;
                }
            }
            
            mse = mse / original.length;
            const errorPercent = (Math.sqrt(mse) * 100).toFixed(2);
            const pixelsDiffPercent = ((pixelsDifferent / original.length) * 100).toFixed(1);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –≤ —Ç—É–ª—Ç–∏–ø–µ
            updateMSETooltip(mse);
            
            return {
                mse: mse.toFixed(6),
                errorPercent: errorPercent + '%',
                pixelsDiff: `${pixelsDifferent}/784 (${pixelsDiffPercent}%)`
            };
        }

        // –ê–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è –Ω–µ–π—Ä–æ–Ω–∞
        function analyzeNeuron() {
            if (!rbm || !mnistData) {
                console.log('RBM –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                return;
            }
            
            const sampleIndex = parseInt(document.getElementById('sampleSlider').value);
            const neuronIndex = parseInt(document.getElementById('neuronSlider').value);
            const sample = mnistData[sampleIndex];
            
            console.log(`–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–µ–π—Ä–æ–Ω ${neuronIndex} –¥–ª—è –æ–±—Ä–∞–∑—Ü–∞ ${sampleIndex}`);
            
            // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–∫—Ä—ã—Ç–æ–≥–æ —Å–ª–æ—è
            const { reconstruction, hidden } = rbm.reconstruct(sample);
            const activation = hidden[neuronIndex];
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
            document.getElementById('neuronValue').textContent = neuronIndex;
            document.getElementById('activationValue').textContent = activation.toFixed(3);
            
            // 1. –§–∏–ª—å—Ç—Ä –Ω–µ–π—Ä–æ–Ω–∞ (–≤–µ—Å–∞) - –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–ª—è BWR colormap
            const filter = new Float32Array(784);
            let maxAbs = 0;
            for (let i = 0; i < 784; i++) {
                filter[i] = rbm.weights[neuronIndex][i];
                maxAbs = Math.max(maxAbs, Math.abs(filter[i]));
            }
            // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω [-1, 1]
            if (maxAbs > 0) {
                for (let i = 0; i < 784; i++) {
                    filter[i] = filter[i] / maxAbs;
                }
            }
            
            // 2. –ù–∞–ª–æ–∂–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –Ω–∞ –æ–±—Ä–∞–∑–µ—Ü (–∫–∞–∫ –≤ Python: image + 0.5 * weights)
            const overlay = new Float32Array(784);
            for (let i = 0; i < 784; i++) {
                // –ö–æ–º–±–∏–Ω–∏—Ä—É–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª —Å —Ñ–∏–ª—å—Ç—Ä–æ–º, —É—á–∏—Ç—ã–≤–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—é
                overlay[i] = sample[i] + filter[i] * activation * 0.3;
                // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–ª—è BWR –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
                overlay[i] = Math.max(-1, Math.min(1, overlay[i]));
            }
            
            // 3. –í–∫–ª–∞–¥ –Ω–µ–π—Ä–æ–Ω–∞ –≤ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
            // –ò–°–ü–†–ê–í–õ–ï–ù–û: –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è = 0, —Ç–æ –∏ –≤–∫–ª–∞–¥ = 0
            const contribution = new Float32Array(784);
            
            if (activation > 0.01) { // –ü–æ—Ä–æ–≥ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —à—É–º–∞
                for (let i = 0; i < 784; i++) {
                    // –†–µ–∞–ª—å–Ω—ã–π –≤–∫–ª–∞–¥: –≤–µ—Å–∞ –Ω–µ–π—Ä–æ–Ω–∞ √ó –µ–≥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏—è
                    contribution[i] = rbm.weights[neuronIndex][i] * activation;
                    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤ –¥–∏–∞–ø–∞–∑–æ–Ω [0, 1] –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
                    contribution[i] = Math.abs(contribution[i]);
                }
                
                // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –ª—É—á—à–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
                let maxContrib = 0;
                for (let i = 0; i < 784; i++) {
                    maxContrib = Math.max(maxContrib, contribution[i]);
                }
                if (maxContrib > 0) {
                    for (let i = 0; i < 784; i++) {
                        contribution[i] = contribution[i] / maxContrib;
                    }
                }
            }
            // –ï—Å–ª–∏ activation –±–ª–∏–∑–∫–∞ –∫ 0, contribution –æ—Å—Ç–∞–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º –Ω—É–ª–µ–π (—á–µ—Ä–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
            const filterCanvas = document.getElementById('neuronFilterCanvas');
            const overlayCanvas = document.getElementById('neuronOverlayCanvas');
            const contributionCanvas = document.getElementById('neuronContributionCanvas');
            
            if (filterCanvas && overlayCanvas && contributionCanvas) {
                drawImageColored(filterCanvas, filter, 28, 28, 'bwr');
                drawImageColored(overlayCanvas, overlay, 28, 28, 'bwr');
                drawImageColored(contributionCanvas, contribution, 28, 28, 'hot');
                console.log('–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
            } else {
                console.log('Canvas —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
        function updateVisualization() {
            if (!rbm || !mnistData) return;
            
            if (currentMode === 'sample') {
                const index = parseInt(document.getElementById('sampleSlider').value);
                const sample = mnistData[index];
                const { reconstruction, hidden } = rbm.reconstruct(sample);
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
                drawImage(document.getElementById('originalCanvas'), sample, 28, 28);
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
                drawImage(document.getElementById('reconstructionCanvas'), reconstruction, 28, 28);
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π —Å–∫—Ä—ã—Ç—ã—Ö –Ω–µ–π—Ä–æ–Ω–æ–≤
                drawImage(document.getElementById('hiddenCanvas'), hidden, 8, 8);
                
                // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –æ—à–∏–±–∫–∏
                const metrics = calculateErrorMetrics(sample, reconstruction);
                document.getElementById('mseValue').textContent = metrics.mse;
                document.getElementById('errorPercent').textContent = metrics.errorPercent;
                document.getElementById('pixelsDiff').textContent = metrics.pixelsDiff;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–Ω–∞–ª–∏–∑ –Ω–µ–π—Ä–æ–Ω–∞
                analyzeNeuron();
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function drawFilters() {
            if (!rbm) return;
            
            const filtersGrid = document.getElementById('filtersGrid');
            filtersGrid.innerHTML = '';
            
            for (let i = 0; i < 64; i++) {
                const filterItem = document.createElement('div');
                filterItem.className = 'filter-item';
                filterItem.dataset.filterIndex = i;
                
                const canvas = document.createElement('canvas');
                canvas.className = 'filter-canvas';
                canvas.width = 56;
                canvas.height = 56;
                
                // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
                const filter = new Float32Array(784);
                let min = Infinity, max = -Infinity;
                
                for (let j = 0; j < 784; j++) {
                    filter[j] = rbm.weights[i][j];
                    min = Math.min(min, filter[j]);
                    max = Math.max(max, filter[j]);
                }
                
                // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω [0, 1]
                const range = max - min;
                for (let j = 0; j < 784; j++) {
                    filter[j] = (filter[j] - min) / range;
                }
                
                drawImage(canvas, filter, 28, 28);
                filterItem.appendChild(canvas);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø—Ä–µ–≤—å—é
                filterItem.addEventListener('mouseenter', (e) => showFilterPreview(e, i, filter));
                filterItem.addEventListener('mousemove', (e) => updatePreviewPosition(e));
                filterItem.addEventListener('mouseleave', hideFilterPreview);
                
                filtersGrid.appendChild(filterItem);
            }
        }

        // –ü–æ–∫–∞–∑ —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–≤—å—é —Ñ–∏–ª—å—Ç—Ä–∞
        function showFilterPreview(e, index, filterData) {
            const preview = document.getElementById('filterPreview');
            const canvas = document.getElementById('filterPreviewCanvas');
            const title = document.getElementById('filterPreviewTitle');
            
            drawImage(canvas, filterData, 28, 28);
            title.textContent = `–§–∏–ª—å—Ç—Ä #${index + 1}`;
            
            preview.classList.add('active');
            updatePreviewPosition(e);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–µ–≤—å—é
        function updatePreviewPosition(e) {
            const preview = document.getElementById('filterPreview');
            if (!preview.classList.contains('active')) return;
            
            const x = e.clientX;
            const y = e.clientY;
            const previewWidth = 254; // 224px canvas + padding
            const previewHeight = 280; // canvas + title + padding
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
            let left = x + 20;
            let top = y - previewHeight / 2;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞
            if (left + previewWidth > window.innerWidth) {
                left = x - previewWidth - 20;
            }
            if (top < 10) {
                top = 10;
            }
            if (top + previewHeight > window.innerHeight - 10) {
                top = window.innerHeight - previewHeight - 10;
            }
            
            preview.style.left = left + 'px';
            preview.style.top = top + 'px';
        }

        // –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–≤—å—é
        function hideFilterPreview() {
            const preview = document.getElementById('filterPreview');
            preview.classList.remove('active');
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–µ—Å–æ–≤
        function checkSavedWeights() {
            const loadBtn = document.getElementById('loadBtn');
            const savedWeights = localStorage.getItem('rbm_weights');
            
            if (savedWeights && !rbm) {
                loadBtn.style.display = 'inline-block';
            } else {
                loadBtn.style.display = 'none';
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('trainBtn').addEventListener('click', trainNetwork);

        document.getElementById('sampleSlider').addEventListener('input', (e) => {
            document.getElementById('indexValue').textContent = e.target.value;
            updateVisualization();
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–∞ –≤—ã–±–æ—Ä–∞ –Ω–µ–π—Ä–æ–Ω–∞
        document.getElementById('neuronSlider').addEventListener('input', (e) => {
            console.log('Neuron slider changed to:', e.target.value);
            document.getElementById('neuronValue').textContent = e.target.value;
            if (rbm && mnistData) {
                analyzeNeuron();
            }
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"
        document.getElementById('moreInfoBtn').addEventListener('click', () => {
            const btn = document.getElementById('moreInfoBtn');
            const details = document.getElementById('theoryDetails');
            const btnText = btn.querySelector('.btn-text');
            
            btn.classList.toggle('active');
            details.classList.toggle('active');
            
            if (btn.classList.contains('active')) {
                btnText.textContent = '–°–∫—Ä—ã—Ç—å';
            } else {
                btnText.textContent = '–ü–æ–¥—Ä–æ–±–Ω–µ–µ';
            }
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                if (!rbm || isTraining) return;
                
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                currentMode = btn.dataset.mode;
                
                // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
                document.querySelectorAll('.visualization').forEach(v => v.classList.remove('active'));
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—É—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é
                if (currentMode === 'sample') {
                    document.getElementById('sampleViz').classList.add('active');
                    document.getElementById('sliderContainer').style.display = 'block';
                    document.getElementById('neuronAnalysis').style.display = 'block';  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∏–¥–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∞
                    updateVisualization();
                } else {
                    document.getElementById('filtersViz').classList.add('active');
                    document.getElementById('sliderContainer').style.display = 'none';
                    document.getElementById('neuronAnalysis').style.display = 'none';  // –î–û–ë–ê–í–õ–ï–ù–û: –°–∫—Ä—ã–≤–∞–µ–º –≤–∏–¥–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∞
                    drawFilters();
                }
            });
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        console.log('üß† –ú–∞—à–∏–Ω–∞ –ë–æ–ª—å—Ü–º–∞–Ω–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–µ—Å–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        checkSavedWeights();
    </script>
</body>
</html>